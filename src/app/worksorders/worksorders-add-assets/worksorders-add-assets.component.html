<kendo-window title="{{title}}" *ngIf="addAssetWindow" (close)="closeAddAssetWindow()" [top]="10" [minWidth]="700"
    [width]="1050" [height]="850" [minHeight]="350">

    <div class="row headerArea">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-2">
                    <label for="">Phase:</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
                <div class="col-md-2">
                    <label for="">Phase Budget:</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
                <div class="col-md-2">
                    <label for="">Phase Available Budget</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
            </div>
        </div>

        <div class="col-md-12">
            <div class="row">
                <div class="col-md-2">
                    <label for=""> Asset(s) Selected:</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
                <div class="col-md-2">
                    <label for="">Asset Checklist Cost:</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
                <div class="col-md-2">
                    <label for="">Required Budget</label>
                </div>
                <div class="col-md-2">
                    <input type="text">
                </div>
            </div>
        </div>

        <div class="col-md-12">
            <div class="row hiearchyDiv">
                <div class="col-md-2">
                    <label>Hierarchy</label>
                </div>

                <div class=" col-md-8 hiearchyTree">
                    <ul id="myUL">
                        <ng-template #recursiveList let-printHiearchy>
                            <li *ngFor="let item of printHiearchy">
                                <span><span style="color:red;">({{ item?.assetName }})</span> {{ item?.assetId }} -
                                    {{ item?.address }}</span>
                                <ul *ngIf="item.childLayers.length > 0">
                                    <ng-container
                                        *ngTemplateOutlet="recursiveList; context:{ $implicit: item.childLayers }">
                                    </ng-container>
                                </ul>
                            </li>
                        </ng-template>
                        <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: printHiearchy }">
                        </ng-container>

                    </ul>
                </div>

                <div class="hiearchyBtn col-md-2 p-0">
                    <button type="button" (click)="openHiearchyWindow()" class="btn btn-sm">...</button>
                    <button type="button" (click)="clearPropSec()" class="btn btn-sm">Clear</button>
                </div>


            </div>
        </div>

        <div class="col-md-12">
            <div class="row">
                <div class="col-md-2">
                    <label for=""> Wildcard Address:</label>
                </div>
                <div class="col-md-4">
                    <input type="text">
                </div>
                <div class="col-md-2">
                    <label for="">Asset Type:</label>
                </div>
                <div class="col-md-2">
                    <select>
                        <option value="">sds</option>
                        <option value="">sds</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-sm">Search</button>
                </div>

            </div>
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-md-12 mt-2">
            <kendo-grid [data]="gridView" [height]="570" [selectable]="{
                    mode: 'multiple'
                  }" filterable="menu" [resizable]="true" [sortable]="{
                    allowUnsort: true,
                    mode: 'multiple'
                    }" [skip]="state.skip" [sort]="state.sort" [filter]="state.filter"
                (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
                (cellClick)="cellClickHandler($event)" [navigable]="false">

                <kendo-grid-column title=" " width="37" [filterable]="false" [sortable]="false">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <li class="nav-item dropdown list-unstyled" style="margin-top: -7px;">
                            <i data-toggle="dropdown" aria-expanded="false" class="fas fa-bars"
                                (click)="setSeletedRow(dataItem)"></i>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0)">Status</a>
                                <a class="dropdown-item" href="javascript:void(0)">Dates</a>
                                <a class="dropdown-item" href="javascript:void(0)">Complete</a>
                                <a class="dropdown-item" href="javascript:void(0)">Comments</a>
                                <!-- <a class="dropdown-item" href="javascript:void(0)">Edit Fee</a> -->

                            </div>
                        </li>

                    </ng-template>
                </kendo-grid-column>


                <kendo-grid-column field="eventSequence" title="Seq" width="100">
                </kendo-grid-column>
                <kendo-grid-column field="busareaName" title="Business Area" width="160">
                </kendo-grid-column>
                <kendo-grid-column field="eventTypeCode" title="Code" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventName" title="Task" width="410">
                </kendo-grid-column>
                <kendo-grid-column field="eventRowCount" title="Record(s)" width="120">
                </kendo-grid-column>


            </kendo-grid>

        </div>


    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <!-- <select class="selectTemplate">
                <option value="w">Test</option>
                <option value="w">Test</option>
            </select>

            <button class="btn btn-sm themeButton ml-3">Apply Selected</button>
            <button class="btn btn-sm themeButton ml-2">Apply All</button> -->
        </div>

        <div class="col-md-6 text-right">
            <button (click)="closeAddAssetWindow()" class="btn btn-sm themeButton">Close</button>
        </div>
    </div>

    <div class="worksOrderAddAssetOverlay"></div>

    <!-- window for add new hiearchy starts -->
    <kendo-window [height]="640" [top]="15" [width]="700" title="Select Hierarchy..." *ngIf="hiearchyWindow"
        (close)="closeHiearchyWindow()">
        <div class="row hiearchyDiv">
            <div class="col-md-12">
                <div class="form-group">
                    <select class="form-control" id="sel1" (change)="getHiearchyTree()"
                        [(ngModel)]="selectedHiearchyType">
                        <option *ngFor="let hiearchyTypeList of hiearchyTypeLists"
                            [ngValue]="hiearchyTypeList.hierarchyTypeCode">
                            {{hiearchyTypeList.hierarchyTypeName}}</option>
                    </select>
                </div>
            </div>

            <div class="col-md-12">
                <ul class="tree" *ngIf="hierarchyLevels">
                    <ng-template #recursiveList let-hierarchyLevels>
                        <li *ngFor="let item of hierarchyLevels" class="{{item?.assetId}}">

                            <ng-container *ngIf="item.childLayers.length > 0; then someContent else otherContent">
                            </ng-container>
                            <ng-template #someContent>
                                <input type="checkbox" [checked]="visitedHierarchy[item?.assetId] != undefined"
                                    id="{{item?.assetId}}" class="chkBox" />
                                <label
                                    [className]="selectedhierarchyLevel != undefined ? ( selectedhierarchyLevel.assetId == item.assetId ? 'tree_label selected' : 'tree_label') : 'tree_label'"
                                    (click)="selectHiearchy($event, item)" for="{{item?.assetId}}"><span
                                        style="color:red;">({{
                                        item?.assetName }})</span>
                                    {{ item?.assetId }} - {{ item?.address }}</label>
                            </ng-template>
                            <ng-template #otherContent>
                                <label (click)="selectHiearchy($event, item)"> <span
                                        [className]="selectedhierarchyLevel != undefined ? ( selectedhierarchyLevel.assetId == item.assetId ? 'tree_label selected' : 'tree_label') : 'tree_label'"><span
                                            style="color:red;">({{ item?.assetName }})</span> {{ item?.assetId }} -
                                        {{ item?.address }}</span></label>
                            </ng-template>

                            <ul *ngIf="item.childLayers.length > 0">
                                <ng-container
                                    *ngTemplateOutlet="recursiveList; context:{ $implicit: item.childLayers }">
                                </ng-container>
                            </ul>
                        </li>
                    </ng-template>
                    <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: hierarchyLevels }">
                    </ng-container>
                </ul>


                <div class="pull-right footerButton footerSec">
                    <button (click)="closeHiearchyWindow()" class="btn btn-sm">Cancel</button>
                    <button class="btn btn-sm btn-default themeButton" (click)="setHiearchyValues()">Ok</button>

                </div>


            </div>

        </div>

    </kendo-window>
</kendo-window>
<div class="container-fluid flex-grow-1 container-p-y">

    <div class="row">
        <div class="col-md-2 col-sm-3">
            <h4 class="font-weight-bold py-3 mb-1">
                Tasks
            </h4>
        </div>

        <div class="col-md-10 text-right" *ngIf="selectedEvent.length > 1">
            <button type="button" class="btn btn-sm themeButton mr-1" (click)="editEventMethod()">Edit</button>
            <button type="button" class="btn btn-sm themeButton mr-1" (click)="opneNotifyWindow()">Notify</button>
            <button type="button" class="btn btn-sm themeButton mr-1" (click)="runEvent()">Run</button>
            <button type="button" class="btn btn-sm themeButton mr-1" (click)="copyEvent()">Copy</button>
            <button type="button" class="btn btn-sm themeButton" (click)="openConfirmationDialog()">Delete</button>
        </div>

    </div>

    <div class="row mt-2">
        <div class="col-md-12 filterCheckBox">
            <div class="form-group mt-1">
                <label class="switcher switcher-secondary filterLabel">
                    <input type="checkbox" (change)="hideCompletedFilter($event.target.value)"
                        [checked]="hideComplete" value="{{hideComplete}}" class="switcher-input">
                    <span class="switcher-indicator colSwitch">
                        <span class="switcher-yes">
                            <span class="ion ion-md-checkmark"></span>
                        </span>
                        <span class="switcher-no">
                            <span class="ion ion-md-close"></span>
                        </span>
                    </span>
                    <span class="switcher-label">Hide Completed</span>
                </label>
            </div>

            <div class="form-group mt-1">
                <label class="switcher switcher-secondary filterLabel">
                    <input type="checkbox" (change)="assignedTomeFilter($event.target.value)"
                        [checked]="assignedTome" value="{{assignedTome}}" class="switcher-input">
                    <span class="switcher-indicator colSwitch">
                        <span class="switcher-yes">
                            <span class="ion ion-md-checkmark"></span>
                        </span>
                        <span class="switcher-no">
                            <span class="ion ion-md-close"></span>
                        </span>
                    </span>
                    <span class="switcher-label">Assigned to me</span>
                </label>
            </div>

        </div>
        <div class="col-md-12">
            <kendo-grid (groupChange)="groupChange($event)" [group]="state.group" [groupable]="true" [data]="gridView"
                [height]="650" filterable="menu" [resizable]="true" [sortable]="{
    allowUnsort: allowUnsort,
    mode: multiple ? 'multiple' : 'single'
    }" [skip]="state.skip" [sort]="state.sort" [selectable]="selectableSettings" kendoGridSelectBy="eventTypeCode"
                [selectedKeys]="mySelection" (selectedKeysChange)="onSelectedKeysChange($event)" [filter]="state.filter"
                (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
                (cellClick)="cellClickHandler($event)" [navigable]="true">

                <kendo-grid-column title=" " width="37" [filterable]="false">
                    <!-- <ng-template kendoGridCellTemplate let-dataItem>
                        <li [ngClass]="{'disabled' : selectedEvent.length > 1}" class="nav-item dropdown list-unstyled"
                            style="margin-top: -7px;">
                            <i data-toggle="dropdown" aria-expanded="false" class="fas fa-bars"></i>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0)" (click)="editEventMethod()">Edit</a>
                                <a class="dropdown-item" href="javascript:void(0)"
                                    (click)="opneNotifyWindow()">Notify</a>
                                <a [ngClass]="{'disabled' : (dataItem.eventParamCount <= 0 &&  dataItem.eventParamEmptyCount != 0) || (dataItem.eventParamCount <= 0 &&  dataItem.eventParamEmptyCount <= 0) }"
                                    class="dropdown-item" href="javascript:void(0)"
                                    (click)="openParamsWindow()">Parameter(s)</a>

                                <a class="dropdown-item" href="javascript:void(0)" (click)="runEvent()">Run</a>
                                <a [ngClass]="{'disabled' : dataItem.eventTypeStatus == 'S' && validRundate(dataItem.eventNextRunDate)  }"
                                    class="dropdown-item" href="javascript:void(0)" (click)="copyEvent()">Copy</a>
                                <a [ngClass]="{'disabled' : dataItem.eventTypeUpdatedBy != currentUser.userId}"
                                    class="dropdown-item" href="javascript:void(0)"
                                    (click)="openConfirmationDialog()">Delete</a>

                            </div>
                        </li>

                    </ng-template> -->
                </kendo-grid-column>

                <kendo-grid-column field="eventTypeNotifyCount" title="" width="50" [filterable]="false"
                    [groupable]="true">

                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            <img style="height: 14px;"
                                *ngIf="dataItem.eventParamCount > 0 &&  dataItem.eventParamEmptyCount == 0"
                                src="assets/img/icons/tick.png" />
                            <img style="height: 14px;"
                                *ngIf="dataItem.eventParamCount > 0 &&  dataItem.eventParamEmptyCount > 0"
                                src="assets/img/icons/cross.png" />

                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column field="eventSequence" title="Seq" width="100">
                </kendo-grid-column>
                <kendo-grid-column field="busareaName" title="Bus Area" width="160">
                </kendo-grid-column>
                <kendo-grid-column field="eventTypeCode" title="Code" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventName" title="Event" width="270">
                </kendo-grid-column>
                <kendo-grid-column field="eventRowCount" title="Record(s)" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventProcessedCount" title="Processed" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventCreatedDate" title="Created" width="160">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.eventCreatedDate | dateFormat : 'DD-MMM-YYYY HH:mm:ss' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="eventStatusName" title="Status" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventAssignUserName" title="Assigned To" width="220">
                </kendo-grid-column>
                <kendo-grid-column field="eventEscStatusName" title="Esc" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventSevTypeName" title="Severity" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventAskTypeName" title="Action" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventPlannedDate" title="Planned" width="160">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.eventPlannedDate | dateFormat : 'DD-MMM-YYYY HH:mm:ss' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="eventCreatedBy" title="Created By" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventUpdatedBy" title="Updated By" width="120">
                </kendo-grid-column>
                <kendo-grid-column field="eventUpdateDate" title="Updated" width="160">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.eventUpdateDate | dateFormat : 'DD-MMM-YYYY HH:mm:ss' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>



            </kendo-grid>

        </div>
    </div>


</div>
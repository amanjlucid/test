<kendo-window title="{{title}}" *ngIf="userEvents" (close)="closeGrid()" [top]="10" [minWidth]="700" [width]="1230"
  [height]="auto" [minHeight]="700">

  <div class="row">
    <div class="col-md-12 text-right">
      <button id="viewEvent" [disabled]="!selectedEvent" class="btn btn-sm themeButton mr-1">View Event
      </button>
      <button id="exportEvents" [disabled]="!usereventData" (click)="export()" class="btn btn-sm themeButton">Export
      </button>
    </div>

  </div>

  <div class="row mt-3">
    <div class="col-md-12">
      <kendo-grid (groupChange)="groupChange($event)" [group]="state.group" [groupable]="true" [data]="gridView"
        [height]="650" filterable="menu" [resizable]="true" [sortable]="{
        allowUnsort: allowUnsort,
        mode: multiple ? 'multiple' : 'single'
        }" [skip]="state.skip" [sort]="state.sort" [selectable]="{
          mode: 'multiple'
        }" [filter]="state.filter" [pageSize]="pageSize" [rowHeight]="36" scrollable="virtual"
        (pageChange)="pageChange($event)" (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
        (cellClick)="cellClickHandler($event)" [navigable]="true">

        <kendo-grid-column field="pictureCount" title="" width="50" [filterable]="false">

          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              <img src="assets/img/icons/camera.png" style="height:17px; margin-top: -2px;">
            </span>
          </ng-template>
        </kendo-grid-column>


        <kendo-grid-column field="eventSequence" title="Seq" width="120" filter="numeric" format="{0:b}">
        </kendo-grid-column>
        <kendo-grid-column field="busareaName" title="Bus Area" width="130">
        </kendo-grid-column>
        <kendo-grid-column field="eventTypeCode" title="Code" width="90">
        </kendo-grid-column>
        <kendo-grid-column field="eventName" title="Event" width="330">
        </kendo-grid-column>
        <kendo-grid-column field="eventParamCount" title="Record(s)" width="120" filter="numeric" format="{0:b}">
        </kendo-grid-column>
        <kendo-grid-column field="eventProcessedCount" title="Processed" width="120" [filterable]="false">
        </kendo-grid-column>
        <kendo-grid-column field="eventCreatedDate" title="Created" width="130" filter="date" format="{0:dd-MM-yyyy}">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.eventCreatedDate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="eventNotifyStatusName" title="Status" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventAssignUser" title="Assigned To" width="130">
        </kendo-grid-column>
        <kendo-grid-column field="eventEscStatusName" title="Esc" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventSevTypeName" title="Severity" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventAskTypeName" title="Action" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventPlannedDate" title="Planned" width="130" filter="date" format="{0:dd-MM-yyyy}">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.eventPlannedDate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="eventCreatedBy" title="Created By" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventUpdatedBy" title="Updated By" width="120">
        </kendo-grid-column>
        <kendo-grid-column field="eventUpdateDate" title="Updated" width="130" filter="date" format="{0:dd-MM-yyyy}">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.eventUpdateDate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

      </kendo-grid>
    </div>

  </div>


</kendo-window>
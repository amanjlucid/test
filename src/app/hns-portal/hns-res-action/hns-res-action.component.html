<div class="container-fluid flex-grow-1 mt-2">
  <div class="row filterArea">

    <div class="col-sm-12 col-md-1">
      <label class="">Text Search:</label>
    </div>
    <div class="col-sm-12 col-md-5 pl-0">
      <input type="text" (keyup)="setTextSearch($event)" [(ngModel)]="headerFilters.Textstring" class="searchBox">
    </div>

    <div class="col-sm-12 col-md-4 radioFilterDiv">
      <div class="radioDiv">
        <label class="radio-inline">
          <input (ngModelChange)="onChange($event)" value="A" [(ngModel)]="gridStatus" type="radio"
            name="gridStatus">All
        </label>
        <label class="radio-inline">
          <input (ngModelChange)="onChange($event)" value="Y" [(ngModel)]="gridStatus" type="radio" name="gridStatus"
            checked>Outstanding
        </label>
        <label class="radio-inline">
          <input (ngModelChange)="onChange($event)" value="O" [(ngModel)]="gridStatus" type="radio"
            name="gridStatus">Overdue
        </label>
        <label class="radio-inline">
          <input (ngModelChange)="onChange($event)" value="R" [(ngModel)]="gridStatus" type="radio"
            name="gridStatus">Resolved
        </label>
        <label class="radio-inline">
          <input (ngModelChange)="onChange($event)" value="N" [(ngModel)]="gridStatus" type="radio" name="gridStatus">No
          Issues
        </label>
      </div>
    </div>

    <div class="col-md-2 text-center">
      <button class="btn btn-sm" [disabled]="loading" (click)="searchActionGrid()">Search</button>
      <button class="btn btn-sm ml-3 themeButton" *ngIf="hnsPermission.indexOf('Export Data') != -1"
        (click)="exportToExcelTop()">Export</button>


    </div>
  </div>


  <div class="row mt-3">
    <div class="col-md-12 actionGrid">
      <kendo-grid [data]="query | async" [loading]="loading" [skip]="headerFilters.CurrentPage"
        [pageSize]="headerFilters.PageSize" [selectable]="{
        mode: 'multiple'
      }" filterable="menu" [resizable]="true" [sortable]="{
        allowUnsort: allowUnsort,
        mode: multiple ? 'multiple' : 'single'
        }" [sort]="state.sort" (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
        (cellClick)="cellClickHandler($event)" [filter]="state.filter" scrollable="virtual" [rowHeight]="36"
        [height]="600" (pageChange)="pageChange($event)" [navigable]="true">


        <kendo-grid-column title=" " width="37" [filterable]="false">
          <ng-template kendoGridCellTemplate let-dataItem>
            <li class="nav-item dropdown list-unstyled" style="margin-top: -7px;">
              <i data-toggle="dropdown" aria-expanded="false" class="fas fa-bars barClas"></i>
              <div class="dropdown-menu">
                <!-- <a class="dropdown-item" (click)="openHnsForm('new')" href="javascript:void(0)">New</a> -->
                <a class="dropdown-item" *ngIf="hnsPermission.indexOf('View Assessment') != -1"
                  href="javascript:void(0)" (click)="openAssessment(dataItem)">View
                  Assessment</a>
                <a class="dropdown-item" *ngIf="hnsPermission.indexOf('Edit Answer') != -1" href="javascript:void(0)"
                  (click)="openEditAnswer(dataItem)">Edit Answer</a>
                <a class="dropdown-item" *ngIf="hnsPermission.indexOf('Add Issue') != -1" href="javascript:void(0)"
                  (click)="openIssue('add', dataItem)">Add Issue</a>
                <a class="dropdown-item"
                  *ngIf="hnsPermission.indexOf('Edit Issue') != -1 || hnsPermission.indexOf('Edit Issue (Work Fields Only)') != -1"
                  href="javascript:void(0)" (click)="openIssue('edit', dataItem)">Edit Issue</a>
                <a class="dropdown-item" *ngIf="hnsPermission.indexOf('Images') != -1" href="javascript:void(0)"
                  (click)="viewImage(dataItem)">Images</a>
                <a class="dropdown-item" *ngIf="hnsPermission.indexOf('Documents') != -1" href="javascript:void(0)"
                  (click)="opneDocList(dataItem)">Documents</a>
                <!-- <a class="dropdown-item" href="javascript:void(0)" (click)="exportToExcelTop()">Export Data</a> -->


                <div class="dropdown-toggle" *ngIf="hnsPermission.indexOf('Report') != -1">
                  <div class="dropdown-item">Reports</div>


                  <div class="dropdown-menu">
                    <div class="dropdown-toggle">
                      <div class="dropdown-item">Standard Assessment Report</div>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" (click)="report(dataItem, 'stCD')" href="javascript:void(0)">Current
                          Data</a>
                        <a class="dropdown-item" (click)="report(dataItem, 'stCDR')" href="javascript:void(0)">Current
                          Data
                          (Recalculate Score)</a>
                        <a class="dropdown-item" (click)="report(dataItem, 'stOD')" href="javascript:void(0)">Original
                          Data</a>

                      </div>
                    </div>

                    <div class="dropdown-toggle">
                      <div class="dropdown-item">Published Assessment Report</div>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" (click)="report(dataItem, 'paCd')" href="javascript:void(0)">Current
                          Data</a>
                        <!-- <a class="dropdown-item" (click)="report(true)" href="javascript:void(0)">Current Data
                          (Recalculate Score)</a> -->
                        <a class="dropdown-item" (click)="report(dataItem, 'paOD')" href="javascript:void(0)">Original
                          Data</a>

                      </div>
                    </div>

                    <div class="dropdown-toggle">
                      <div class="dropdown-item">Published Assessment Report (Redacted)</div>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" (click)="report(dataItem, 'parCD')" href="javascript:void(0)">Current
                          Data</a>
                        <!-- <a class="dropdown-item" (click)="report(true)" href="javascript:void(0)">Current Data
                          (Recalculate Score)</a> -->
                        <a class="dropdown-item" (click)="report(dataItem, 'parOD')" href="javascript:void(0)">Original
                          Data</a>

                      </div>
                    </div>
                  </div>




                  <!-- <div class="dropdown-menu">
                      <a class="dropdown-item" (click)="report(false)"
                          href="javascript:void(0)">Standart Assessment Report</a>
                      <a class="dropdown-item" (click)="report(true)"
                          href="javascript:void(0)">Published Assessment Report</a>
                          <a class="dropdown-item" (click)="report(true)"
                          href="javascript:void(0)">Published Assessment Report(Redacted)</a>

                  </div> -->
                </div>




              </div>
            </li>

          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasPhoto" title="" width="40" [filterable]="false">
          <ng-template kendoGridHeaderTemplate>
            <i class="fa fa-question" aria-hidden="true"></i>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <!-- <i *ngIf="dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y'"
              class="red fa fa-exclamation-circle" aria-hidden="true"></i>
            <i *ngIf="dataItem.hasiactionstatus === 'R' || dataItem.hasiactionstatus === 'I'" class="fa fa-check-circle"
              [ngClass]="{'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }"
              aria-hidden="true"></i> -->
            <!-- <i *ngIf="dataItem.hasiactionstatus === 'R'"
              class="fa fa-check-circle green" aria-hidden="true"></i> -->
            <img style="height: 14px;" *ngIf="dataItem.hasiactionstatus === 'R'" src="assets/img/icons/tick.png" />
            <img style="height: 14px;" *ngIf="dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y'"
              src="assets/img/icons/cross.png" />
          </ng-template>
        </kendo-grid-column>


        <kendo-grid-column field="hasPhoto" title="" width="50" [filterable]="false">
          <ng-template kendoGridHeaderTemplate>
            <i class="fa fa-camera" aria-hidden="true"></i>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              <img *ngIf="dataItem.hasPhoto != 'N'" src="assets/img/icons/camera.png" style="height:19px;">
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="notepadCount" title="" width="50" [filterable]="false">
          <ng-template kendoGridHeaderTemplate>
            <img style="height:14px; width:16px;" src="assets/img/icons/attach.png" />
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <img data-toggle="dropdown" *ngIf="dataItem.notepadCount > 0" aria-expanded="true"
              style="height:14px; width:16px;" class="attachmentIcon" src="assets/img/icons/attach.png" />
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="assid" title="Asset ID" width="130">
          <ng-template kendoGridFilterMenuTemplate let-filter="filter" let-column="column"
            let-filterService="filterService">
            <!-- <kendo-grid-string-filter-cell [showOperators]="false" [column]="column" [filter]="state.filter">
            </kendo-grid-string-filter-cell> -->
            <!-- <text-filter [filter]="state.filter" field="assid" textField="val" valueField="assid"></text-filter> -->

            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>

          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.assid }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="astconcataddress" title="Address" width="300">
          <ng-template kendoGridFilterMenuTemplate let-filter="filter" let-column="column"
            let-filterService="filterService">
            <!-- <text-filter [filter]="state.filter" field="astconcataddress" textField="val" valueField="astconcataddress"></text-filter> -->
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.astconcataddress }}
            </span>
          </ng-template>
        </kendo-grid-column>


        <kendo-grid-column field="asspostcode" title="PostCode" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.asspostcode }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hascode" title="Definition" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hascode }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasversion" title="Vers" width="80">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </range-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasversion }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiactionstatus" title="Status" width="130">
          <!-- <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
            let-filterService="filterService">
            <multicheck-filter [isPrimitive]="false" [field]="column.field" [currentFilter]="filter"
              [filterService]="filterService" textField="hasiactionstatus" valueField="hasiactionstatus"
              [data]="statusArr"></multicheck-filter>
          </ng-template> -->
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiactionstatus == "O" ? "Outstanding" : dataItem.hasiactionstatus == "Y" ? "Overdue" : dataItem.hasiactionstatus == "R" ? "Resolved" : "No Issues" }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasquestioncode" title="Question Code" width="260">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasquestioncode }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasquestiontext" title="Question" width="240">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasquestiontext }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiissue" title="Issue" width="250">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiissue }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiproposedaction" title="Proposed Action" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiproposedaction }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiresolution" title="Resolution" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiresolution }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiresolutiondate" title="Resolution Date" width="150" format="{0:dd/MM/yyyy}">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiresolutiondate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiseverity" title="Severity" width="120">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiseverity == 0 ? '' : dataItem.hasiseverity }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiprobability" title="Probability" width="140">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiprobability == 0 ? '' : dataItem.hasiprobability }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiriskscore" title="Risk Score" width="130">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiriskscore == 0 ? '' : dataItem.hasiriskscore }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasipriority" title="Priority" width="130">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasipriority }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasibudgetcode" title="Budget" width="120">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasibudgetcode }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasitargetdate" title="Target Date" width="140">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasitargetdate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="overduepending" title="Overdue?" width="120">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <!-- <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
            let-filterService="filterService">
            <multicheck-filter [isPrimitive]="false" [field]="column.field" [currentFilter]="filter"
              [filterService]="filterService" textField="overduepending" valueField="overduepending"
              [data]="overDueArr"></multicheck-filter>
          </ng-template> -->
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.overduepending }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <!-- <kendo-grid-column field="hasiactionstatus" title="Status" width="130">
         
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>

          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiactionstatus == "O" || dataItem.hasiactionstatus == "Y" ? "Outstanding" : dataItem.hasiactionstatus == "R" ? "Resolved" : "" }}
            </span>
          </ng-template>
        </kendo-grid-column> -->

        <kendo-grid-column field="hasalocation" title="Location" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasalocation  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasafloor" title="Floor" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasafloor  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasacomments" title="Answer Comments" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasacomments  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasicomments" title="Issue Comments" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasicomments  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasaassessmentref" title="Assessment Ref" width="250">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasaassessmentref  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasaassessor" title="Assessor" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasaassessor  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasaassessmentdate" title="Assessment Date" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasaassessmentdate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasimodifiedby" title="Issue Modified By" width="180">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasimodifiedby  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasimodifieddate" title="Issue Modified Date" width="180">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasimodifieddate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkstatus" title="Work Status" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkstatus == 'U' ? "Work Not Authorised" : dataItem.hasiworkstatus == 'A' ? "Work Authorised" :  dataItem.hasiworkstatus == 'C' ? "Complete" : ""  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkauthoriseddate" title="Work Auth Date" width="180">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkauthoriseddate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkauthoriseduser" title="Work Auth User" width="150">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkauthoriseduser  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkreference" title="Work Ref" width="180">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkreference  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkscheduledate" title="Work Schedule Date" width="180">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkscheduledate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworknotes" title="Work Notes" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <simple-text-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </simple-text-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworknotes  }}
            </span>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="hasiworkcompletiondate" title="Work Completion Date" width="200">
          <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
            </date-range-filter>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span
              [ngClass]="{'red': dataItem.hasiactionstatus === 'O' || dataItem.hasiactionstatus === 'Y', 'green':dataItem.hasiactionstatus === 'R', 'black': dataItem.hasiactionstatus === 'I'   }">
              {{ dataItem.hasiworkcompletiondate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>


      </kendo-grid>
    </div>

  </div>
</div>

<div class="actionOverlay"></div>

<app-hns-res-assessment *ngIf="showAssessment" [showAssessment]="showAssessment" [selectedAction]="selectedAction"
  (closeAssessment)="closeAssessment($event)"></app-hns-res-assessment>

<app-hns-res-edit-answer *ngIf="showEditAnswer" [isAssessment]="false" [showEditAnswer]="showEditAnswer"
  [selectedAction]="selectedAction" [rootAssessment]="selectedAction" (closeEditAnswer)="closeEditAnswer($event)">
</app-hns-res-edit-answer>

<app-hns-res-add-edit-issue *ngIf="showIssue" [issueFormMode]="issueFormMode" [isAssessment]="false"
  [showIssue]="showIssue" [selectedAction]="selectedAction" [rootAssessment]="selectedAction"
  (closeIssueEvt)="closeIssue($event)"></app-hns-res-add-edit-issue>

<app-hns-res-ans-image *ngIf="showImage" [showImage]="showImage" [isAssessment]="false"
  [selectedAction]="selectedAction" [rootAction]="selectedAction" [imageFor]="'both'"
  (closerImage)="closerImage($event)"></app-hns-res-ans-image>

<app-hns-res-document *ngIf="showDoc" [showDoc]="showDoc" [selectedAction]="selectedAction"
  (closeDocList)="closeDocList($event)"></app-hns-res-document>

<app-hns-res-info-edit-ans *ngIf="showInfoEditAns" [isAssessment]="false" [showInfoEditAns]="showInfoEditAns"
  [selectedAction]="selectedAction" [rootAssessment]="selectedAction"
  (closeInfoChangeAnswer)="closeInfoChangeAnswer($event)"></app-hns-res-info-edit-ans>


<kendo-dialog title="Missing Redaction End Qualifier ($$$) in the following fields" *ngIf="dialogOpened"
  (close)="closeDialog()" [minWidth]="250" [width]="670">

  <div class="row">
    <div class="col-md-12">
      <p style="margin: 30px; text-align: center;">{{validatReportString}}</p>
    </div>
  </div>

  <div class="row" style="margin-top: 20px;">
    <div class="col-md-12 text-right">
      <button type="button" class="btn btn-sm themeButton" (click)="closeDialog()">Ok</button>
    </div>
  </div>

</kendo-dialog>
<kendo-window title="{{title}}" *ngIf="openVariationWorkList" (close)="closeWorkList()" [top]="20" [minWidth]="700"
    [width]="980" [height]="auto" [minHeight]="350">
    <div class="row">
        <div class="col-md-2">Works Order: </div>
        <div class="col-md-10">
            <input type="text"
                value="{{singleVariation?.woiissuereason}} (Variation No: {{singleVariation?.wopsequence}})"
                class="form-control form-control-sm" [readonly]="true">
        </div>
    </div>


    <div class="row">
        <div class="col-md-12 mt-2">
            <kendo-grid #grid [data]="gridView" [height]="600" [selectable]="{
                mode: 'multiple'
              }" filterable="menu" [resizable]="true" [sortable]="{
                allowUnsort: true,
                mode: 'multiple'
                }" [skip]="state.skip" [loading]="loading" [pageSize]="pageSize" [rowHeight]="36"
                (pageChange)="pageChange($event)" scrollable="virtual" [sort]="state.sort" [filter]="state.filter"
                (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
                (cellClick)="cellClickHandler($event)" [navigable]="false">


                <kendo-grid-column title=" " width="37" [filterable]="false" [sortable]="false">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <li class="nav-item dropdown list-unstyled" style="margin-top: -7px;">
                            <i data-toggle="dropdown" aria-expanded="false" class="fas fa-bars"></i>

                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0)"
                                    >Details</a>

                                <div class="dropdown-toggle">
                                    <div class="dropdown-item">Send</div>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" (click)="setComplete('CIY', dataItem)"
                                            href="javascript:void(0)">Customer</a>
                                        <a class="dropdown-item" (click)="setComplete('CIT', dataItem)"
                                            href="javascript:void(0)">Contractor</a>

                                    </div>
                                </div>



                            </div>
                        </li>

                    </ng-template>
                </kendo-grid-column>


                <kendo-grid-column field="wopsequence" title="Sequence" width="130" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column field="woirequesttype" title="Request Type" width="130" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column title="Created By" field="woirequestuser" width="130" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column title="Created Date" field="woirequestdate" width="280">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woirequestdate | dateFormat : 'DD-MMM-YYYY' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Status" field="woiissuestatus" width="280">
                </kendo-grid-column>

                <kendo-grid-column title="Issue User" field="woiissueuser" width="140">
                </kendo-grid-column>

                <kendo-grid-column title="Issue User Type" field="woiissueusertype" width="120">
                </kendo-grid-column>

                <kendo-grid-column title="Issue Date" field="woiissuedate" width="120">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woiissuedate | dateFormat : 'DD-MMM-YYYY' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Issue Reason" field="woiissuereason" width="120">
                </kendo-grid-column>

                <kendo-grid-column title="Fee Cost" field="woifeecost" width="120" [style]="{'text-align': 'right'}">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woifeecost | currency:'GBP':'symbol' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Work Cost" field="woiworkcost" width="120" [style]="{'text-align': 'right'}">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woiworkcost | currency:'GBP':'symbol' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Accept User" field="woiacceptuser" width="120">
                </kendo-grid-column>

                <kendo-grid-column title="Accept Date" field="woiacceptdate" width="120">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woiacceptdate | dateFormat : 'DD-MMM-YYYY' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>


            </kendo-grid>

        </div>

        <div class="col-md-12 text-right mt-2">
            <button (click)="closeWorkList()" class="btn btn-sm themeButton ml-1">Close</button>
        </div>
    </div>
</kendo-window>
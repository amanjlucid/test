<kendo-window title="{{title}}" *ngIf="openWOEditPaymentScheduleWindow"
  (close)="closeEditPaymentScheduleWin()" [top]="10" [minWidth]="700" [width]="1050" [height]="auto"
  [minHeight]="300">

  <div class="row headerArea">
    <div class="col-md-12 headerRow12">
      <div class="row align-items-center">
        <div class="col-md-auto">
          <label for="" class="lbl">Works Order: </label>
        </div>
        <div class="col-md">
          <input [readonly]="true" type="text" class="form-control" placeholder=""
            value="{{worksOrderData.woname}}">
        </div>

      </div>
    </div>

  </div>
  
  <div class="row mt-2">
    <div class="col-md-12">
      
      <kendo-grid #grid="kendoGrid" [data]="gridView" [selectable]="{
        mode: 'single'
      }" [kendoGridSelectBy]="mySelectionKey" [selectedKeys]="mySelection" [groupable]="false" [sortable]="{
              allowUnsort: true,
              mode: multiple ? 'multiple' : 'single'
              }" [sort]="state.sort" [skip]="state.skip" [loading]="loading" [height]="400" (sortChange)="sortChange($event)" (cellClick)="cellClickHandler($event)"
              (cellClose)="cellCloseHandler($event)" [navigable]="false">
        <kendo-grid-column field="wpsstartdate" title="Period Start Date" [editable]="false" [width]="140" [filterable]="false"
          [sortable]="true">
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.wpsstartdate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="wpsenddate" title="Period End Date" [editable]="false" [width]="140" [filterable]="false" [sortable]="true">
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.wpsenddate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="wpspaymentdate" title="Payment Date" [editable]="false" [width]="110" [filterable]="false"
          [sortable]="true">
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.wpspaymentdate | dateFormat : 'DD-MMM-YYYY' }}
            </span>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="wpspaymentstatus" title="Payment Status" [editable]="false" [width]="130" [filterable]="false" [sortable]="true" [style]="{'background-color':'rgba(0, 0, 0, 0.06)'}">
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{ dataItem.wpspaymentstatus }}
            </span>
          </ng-template>
        </kendo-grid-column>        
        <kendo-grid-column field="wpsfixedpaymentvalue" title="Stage Payment" [editable]="false" [width]="120" [filterable]="false" [sortable]="true">
        </kendo-grid-column>
        <kendo-grid-column field="wpsretentionpct" title="Retention %" editor="text" [width]="110" [filterable]="false" [sortable]="false">
        </kendo-grid-column>
        <kendo-grid-column field="wpsretentionvalue" title="Fixed Retention Value" editor="text" [width]="120" [filterable]="false" [sortable]="false">
        </kendo-grid-column>    
        <ng-template kendoGridToolbarTemplate position="bottom" let-position="bottom">
          <div class="text-right mt-2 border-top p-2">
          <button type="submit" class="btn btn-sm themeButton mr-1" (click)="submitPaymentData(grid)">Apply</button>
          <button type="button" class="btn btn-sm themeButton" (click)="closeEditPaymentScheduleWin()">Close</button>
        </div>
        </ng-template>    
      </kendo-grid>
    </div>
  </div>

</kendo-window>

<div class="wopmeditpaymentoverlay"></div>
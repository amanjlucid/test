<kendo-window title="{{title}}" *ngIf="openVariationListAll" (close)="closeVariationListAll()" [top]="20"
    [minWidth]="700" [width]="980" [height]="auto" [minHeight]="350">
    <div class="row">
        <div class="col-md-12 actionBtnDiv text-right">
            <!-- <button type="button" class="btn btn-sm themeButton mr-1 headin_section" (click)="slideToggle()">
                <i class="fa" [ngClass]="(filterToggle) ? 'fa-minus':'fa-plus'"></i>
            </button> -->

            <div class="dropdown mr-1" id="nesting-dropdown-demo">
                <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="dropdown"
                    aria-expanded="false">New</button>

                <div class="dropdown-menu" x-placement="bottom-start"
                    style="position: absolute; will-change: top, left; top: 38px; left: 0px;">
                    <a class="dropdown-item" href="javascript:void(0)" (click)="newBlankVariation()">
                        Variation</a>
                    <a class="dropdown-item" href="javascript:void(0)">
                        Bulk Variation</a>
                </div>
            </div>


        </div>

        <!-- <div class="col-md-12 mt-2">
            <div class="cont">
                <div id="wrapper">
                    <div class="worksorder-variationall-header" style="display: none;">
                        <div class="row">
                            <div class="col-md-2">Works Order: </div>
                            <div class="col-md-10">
                                <input type="text" value="{{worksOrderData?.woname}} ({{worksOrderData?.wosequence}})"
                                    class="form-control form-control-sm" [readonly]="true">
                            </div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-md-2">Asset: </div>
                            <div class="col-md-2">
                                <input type="text" class="form-control form-control-sm" [readonly]="true"
                                    value="{{assetDetails?.assid }}">
                            </div>
                            <div class="col-md-8">
                                <input type="text" class="form-control form-control-sm" [readonly]="true"
                                    value="{{assetDetails?.assid }} - {{assetDetails?.astconcataddress }}">
                            </div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-md-2">Phase: </div>
                            <div class="col-md-10">
                                <input type="text" value="{{phaseData?.wopname }}" class="form-control form-control-sm"
                                    [readonly]="true">
                            </div>
                        </div>

                    </div>


                </div>
            </div>

        </div> -->
    </div>


    <div class="row">
        <div class="col-md-12 mt-2">
            <kendo-grid #grid [data]="gridView" [height]="600" [selectable]="{
                mode: 'multiple'
              }" filterable="menu" [resizable]="true" [sortable]="{
                allowUnsort: true,
                mode: 'multiple'
                }" [skip]="state.skip" [loading]="loading" [pageSize]="pageSize" [rowHeight]="36"
                (pageChange)="pageChange($event)" scrollable="virtual" [sort]="state.sort" [filter]="state.filter"
                (sortChange)="sortChange($event)" (filterChange)="filterChange($event)"
                (cellClick)="cellClickHandler($event)" [navigable]="false">


                <kendo-grid-column title=" " width="37" [filterable]="false" [sortable]="false">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <li class="nav-item dropdown list-unstyled" style="margin-top: -7px;">
                            <i data-toggle="dropdown" aria-expanded="false" class="fas fa-bars"></i>

                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0)"
                                    (click)="openVariationlist(dataItem)">Assets</a>

                                <a [ngClass]="{'disabled' : disableVariationBtns('Edit', dataItem)}"
                                    class="dropdown-item" href="javascript:void(0)"
                                    (click)="editVariation(dataItem)">Details</a>


                                <div class="dropdown-toggle">
                                    <div class="dropdown-item">Send</div>
                                    <div class="dropdown-menu">
                                        <a [ngClass]="{'disabled' : disableVariationBtns('Customer', dataItem)}"
                                            class="dropdown-item" href="javascript:void(0)">Customer</a>
                                        <a [ngClass]="{'disabled' : disableVariationBtns('Contractor', dataItem)}"
                                            class="dropdown-item" href="javascript:void(0)">Contractor</a>

                                    </div>
                                </div>

                                <a [ngClass]="{'disabled' : disableVariationBtns('Issue', dataItem)}"
                                    class="dropdown-item" href="javascript:void(0)"
                                    (click)="editVariation(dataItem)">Issue</a>

                                <a [ngClass]="{'disabled' : disableVariationBtns('Issue', dataItem)}"
                                    class="dropdown-item" href="javascript:void(0)"
                                    (click)="editVariation(dataItem)">Delete</a>




                            </div>
                        </li>

                    </ng-template>
                </kendo-grid-column>


                <kendo-grid-column field="woisequence" title="No." width="80" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column field="woirequesttype" title="Request Type" width="130" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column title="Status" field="woiissuestatus" width="110">
                </kendo-grid-column>

                <kendo-grid-column title="Requested by" field="woirequestuser" width="140" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column title="Requested on" field="woirequestdate" width="140">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woirequestdate | dateFormat : 'DD-MMM-YYYY' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Issue Reason" field="woiissuereason" width="250">
                </kendo-grid-column>

                <kendo-grid-column title="Fee" field="woifeecost" width="150" [style]="{'text-align': 'right'}">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woifeecost | currency:'GBP':'symbol' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Work" field="woiworkcost" width="150" [style]="{'text-align': 'right'}">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woiworkcost | currency:'GBP':'symbol' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column title="Accepted by" field="woiacceptuser" width="140" [filterable]="false">
                </kendo-grid-column>

                <kendo-grid-column title="Accepted on" field="woiacceptdate" width="140">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span>
                            {{ dataItem.woiacceptdate | dateFormat : 'DD-MMM-YYYY' }}
                        </span>
                    </ng-template>
                </kendo-grid-column>


            </kendo-grid>

        </div>

        <div class="col-md-12 text-right mt-2">
            <button (click)="closeVariationListAll()" class="btn btn-sm themeButton ml-1">Close</button>
        </div>
    </div>


    <div class="variationListAllOverlay"></div>

    <!-- <app-variation-work-list *ngIf="openVariationWorkList" [openVariationWorkList]="openVariationWorkList"
        [openedFrom]="openedFrom" [openedFor]="openedFor" [singleVariation]="selectedSingleVariation"
        (closeWorkListEvent)="closeVariationDetails($event)">
    </app-variation-work-list>

    <app-variation-new *ngIf="openNewVariation" [openNewVariation]="openNewVariation"
        [singleVariation]="selectedSingleVariation" [openedFrom]="openedFrom" [formMode]="formMode"
        [selectedAsset]="selectedAsset" (closeNewVariationEvent)="closeNewVariation($event)"
        (outputReason)="getVariationReason($event)">
    </app-variation-new> -->

    <app-variation-list *ngIf="openVariationList" [openVariationList]="openVariationList"
        [openedFrom]="openedFrom" [selectedAsset]="selectedChildRow"
        (closeVariationListEvent)="closeVariation($event)"></app-variation-list>

    <app-blank-variation *ngIf="opneBlankVariation" [opneBlankVariation]="opneBlankVariation" [openedFrom]="openedFrom" (closeBlankVariation)="closeBlankVariation($event)"></app-blank-variation>

</kendo-window>